# .env.example â€” development environment variables
# Copy to .env or export values in your shell to override defaults used by docker-compose and dev scripts

# ==========================================
# INFRASTRUCTURE & DOCKER CONFIGURATION
# ==========================================

# Docker Image Versions
MYSQL_IMAGE=mysql:8.0
REDIS_IMAGE=redis:7-alpine
ZOOKEEPER_IMAGE=confluentinc/cp-zookeeper:7.4.0
KAFKA_IMAGE=confluentinc/cp-kafka:7.4.0
PROMETHEUS_IMAGE=prom/prometheus:v2.45.0
GRAFANA_IMAGE=grafana/grafana:10.4.0
LOKI_IMAGE=grafana/loki:2.8.2
VECTOR_IMAGE=timberio/vector:0.36.0-debian

# ==========================================
# DATABASE SERVICES
# ==========================================

# MySQL Database
MYSQL_ROOT_PASSWORD=rootpassword
MYSQL_DATABASE=clustergenie
MYSQL_USER=root
MYSQL_PASSWORD=rootpassword
MYSQL_HOST=mysql
MYSQL_PORT=3306

# Redis Cache
REDIS_ADDR=redis:6379
REDIS_PORT=6379

# ==========================================
# MESSAGE QUEUE SERVICES
# ==========================================

# Zookeeper (Kafka dependency)
ZOOKEEPER_PORT=2181
ZOOKEEPER_CLIENT_PORT=2181
ZOOKEEPER_TICK_TIME=2000

# Kafka Broker
KAFKA_BROKERS=localhost:9092
KAFKA_PORT=9092
KAFKA_BROKER_ID=1
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1
KAFKA_TRANSACTION_STATE_LOG_MIN_ISR=1
KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR=1

# ==========================================
# APPLICATION SERVICES
# ==========================================

# Core API - Host port mapping (container internal port is 8080)
# When running the `core-api` Docker container, docker-compose maps host:${COREAPI_PORT} -> container:8080.
# If COREAPI_PORT is not set, it defaults to 8085 to avoid collisions with a host backend.
COREAPI_PORT=8085

# Core API - Container internal port
API_PORT=8080

# Frontend (Vite dev server)
FRONTEND_PORT=5173

# ==========================================
# MONITORING SERVICES
# ==========================================

# Prometheus
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_PORT=3001
GF_SECURITY_ALLOW_EMBEDDING=true
GF_AUTH_ANONYMOUS_ENABLED=true
GF_AUTH_ANONYMOUS_ORG_ROLE=Viewer
GF_INSTALL_PLUGINS=grafana-piechart-panel

# Loki
LOKI_PORT=3100

# Vector
VECTOR_LOG=info

# ==========================================
# LOG CONSUMER CONFIGURATION
# ==========================================

# Log Consumer
LOGS_TOPIC=logs.dev
LOG_CONSUMER_GROUP=log-consumer
LOKI_URL=http://loki:3100/loki/api/v1/push

# ==========================================
# BACKEND APPLICATION CONFIGURATION
# ==========================================

# Environment
ENVIRONMENT=dev

# Rate Limiting - Diagnosis
CLUSTERGENIE_DIAG_RATE=0.2
CLUSTERGENIE_DIAG_CAP=5.0
CLUSTERGENIE_DIAG_SCOPE=cluster

# Rate Limiting - Jobs
CLUSTERGENIE_JOBS_RATE=0.1
CLUSTERGENIE_JOBS_CAP=3.0
CLUSTERGENIE_JOBS_SCOPE=user

# Worker Pool
CLUSTERGENIE_WORKER_COUNT=4
CLUSTERGENIE_WORKER_QUEUE=100

# ==========================================
# FRONTEND CONFIGURATION
# ==========================================

# API URL
VITE_API_URL=http://localhost:8085

# Grafana URL
VITE_GRAFANA_URL=http://localhost:3001

# ==========================================
# ADDITIONAL SERVICES (Future gRPC services)
# ==========================================

# Diagnosis Service
DIAGNOSIS_PORT=50052

# Provisioning Service
PROVISIONING_PORT=50053

# Monitoring Service
MONITORING_PORT=50054

# ==========================================
# LOGGING & MONITORING
# ==========================================

# Logging
LOG_LEVEL=info
LOG_FILE=logs/app.log

# Metrics Export Interval (seconds)
METRICS_EXPORT_INTERVAL=30